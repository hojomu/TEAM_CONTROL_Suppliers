<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
<mapper namespace="control.suppliers.mapper.OrderMapper">

   	<select id="memorder_customer" resultType="control.suppliers.model.CustomerVO">
  	  	select *
  		from customer
  		where customer_id=#{customer_id}
  	</select>
  	
  	<!-- product 상품이름 불러오기, 검색기능 -->		
<!-- 	<select id="list" resultType="control.suppliers.model.ProductVO">
	SELECT *
    FROM product
    WHERE name LIKE CONCAT('%', #{name}, '%')
	</select> -->
	
	<!-- product 상품이름 불러오기, 검색기능 -->
<!--  	<select id="list" resultType="control.suppliers.model.ProductVO">
	  select *
	  from product
	  <where>
	    <if test="keyword != null">
	      and name like concat('%', #{keyword}, '%')
	    </if>
	  </where>
	</select> -->
	 
<!-- 	<select id="list" resultType="control.suppliers.model.ProductVO">
	  select *
	  from product
	  <where>
	    <if test="keyword != null">
	      and name like concat('%', #{keyword}, '%')
	    </if>
	  </where>
	  order by product_id
	</select>
	
	<select id="total" resultType="int">
	  select count(*)
	  from product
	  <where>
	    <if test="keyword != null">
	      and name like concat('%', #{keyword}, '%')
	    </if>
	  </where>
	</select> -->
	
	  	<select id="list" resultType="control.suppliers.model.ProductVO">
				select *
				from product
				<if test="keyword != null">
					<choose>
						<otherwise>
						where name like concat('%',#{keyword},'%')
						</otherwise>
					</choose>
			    </if>
			    order by name desc
  		</select>
  		
  		<select id="total" resultType="int">
  			select count(*) from product
  			<if test="keyword != null">
						
			<choose>
				<when test="type=='T'.toString()">
					 where name like concat('%',#{keyword},'%')
				</when>
				<otherwise>
					where name like concat('%',#{keyword},'%')
			      <!-- OR  product_id like concat('%',#{keyword},'%') -->
				</otherwise>
			
			</choose>

			</if>
  		</select>
  		
  		<select id="detail" resultType="control.suppliers.model.ProductVO">
  			select * from product
  			where name=#{name}
  		</select>
	
	
 
</mapper>