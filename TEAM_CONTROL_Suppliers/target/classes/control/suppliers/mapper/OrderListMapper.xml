<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
<mapper namespace="control.suppliers.mapper.OrderListMapper">

		<!-- shipment_table 리스트 -->
   		<select id="OrderList" resultType="control.suppliers.model.OrderVO">
				select *
				from `order`
				<if test="keyword != null">
					<choose>
						<otherwise>
						where order_id like concat('%',#{keyword},'%')
						OR  order_date like concat('%',#{keyword},'%')
						OR  delivery_date like concat('%',#{keyword},'%')
						OR  address like concat('%',#{keyword},'%')
						OR  customer_id like concat('%',#{keyword},'%')
						</otherwise>
					</choose>
			    </if>
			    order by order_id desc
  		</select>
  		
  		<select id="total" resultType="int">
  			select count(*) from `order`
  			<if test="keyword != null">
						
			<choose>
				<when test="type=='T'.toString()">
					 where order_id like concat('%',#{keyword},'%')
				</when>
				<otherwise>
					where order_id like concat('%',#{keyword},'%')
			      OR  product_id like concat('%',#{keyword},'%')
				</otherwise>
			
			</choose>

			</if>
  		</select>
  		
  		</mapper>